{% extends "_master.html" %}

{% block title %}B's Garden Treasures - Gallery Item{% endblock %}

{% block scripts %}

  $(function(){
    $("li#gallery").addClass("active");

    var vm = function()
    {
      self = this;
      self.showModal = function()
      {
        var images = ["{{ STATIC_URL }}{{ item.cover }}", "{{ STATIC_URL }}{{ item.frame_image }}", "{{ STATIC_URL }}{{ item.image }}"];
        $.fancybox.open(images, {
          nextEffect: "fade",  
          prevEffect: "fade",
        });
      }
      self.updateCover = function(a,event)
      {
        var a = $(event.currentTarget).children("img").first();
        $("#mainimage").attr("src", a.attr("src"));
      }
    };

    ko.applyBindings(new vm());
  });
{% endblock %}
{% block content %}
<div id="content" class="container">
  <div class="row-fluid">
    <div id="title" class="span12">
      <h2>{{ id }} - {{ item.title }}</h2>
      <hr>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span4">
      <a href="javascript://" data-bind="click: showModal" class="thumbnail" >
        <img id="mainimage" src="{{ STATIC_URL }}{{ item.cover }}" alt="{{ item.title }}" />
      </a>
      <hr style="margin: 10px 0;" class="hidden-phone">
      <ul class="thumbnails hidden-phone">
        <li class="span3 thumbnail">
          <a href="javascript://" data-bind="click: showModal, event: {mouseover: updateCover}">
            <img src="{{ STATIC_URL }}{{ item.cover }}" />
          </a>
        </li>
        <li class="span3 thumbnail">
          <a href="javascript://" data-bind="click: showModal, event: {mouseover: updateCover}">
            <img src="{{ STATIC_URL }}{{ item.frame_image }}" />
          </a>
        </li>
        <li class="span3 thumbnail">
          <a href="javascript://" data-bind="click: showModal, event: {mouseover: updateCover}">
            <img src="{{ STATIC_URL }}{{ item.image }}" />
          </a>
        </li>
      </ul>
    </div>
    <table class="table table-bordered span8">
    {% for m in item.galleryitemmodifier_set.all %}
      <tr>
        <td class="span2" style="background-color: #FBFBFB;">{{ m.title }}</td>
        <td class="span10">{{ m.value }}</td>
      </tr>
    {% endfor %}
    </table>
  </div>
  <div class="row-fluid">
    <div class="span12">
      <hr />
      {{ item.description }}
    </div>
  </div>
</div>
{% endblock %}
